<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>

<h1>Hello <span data-bind-100="firstName"></span> <span data-bind-100="lastName"></span>!</h1>

<p>
    <a data-bind-100="lastName" href="#lastName={value}"></a>
</p>

<script src="dataBinding.js"></script>
<script>
    function User(userId) {
        var user = {},
            binder = new DataBinding.create({
                id : userId,
                data : user
            });

        user.set = function (name, val) {
            user[name] = val;

            binder.publish(name, val, this, function (arg) {
                // console.log(arg);
            });
        };

        user.get = function (name) {
            return user[name];
        };

        return user;
    }

    // create some test users
    var body = document.getElementsByTagName('body')[0];
    for (i = 100; i > 90; i--) {
        var input = document.createElement('input');
        input.type = 'text';
        input.setAttribute('data-bind-' + i, 'firstName');
        body.appendChild(input);

        input = document.createElement('input');
        input.type = 'text';
        input.setAttribute('data-bind-' + i, 'lastName');
        body.appendChild(input);

        input = document.createElement('input');
        input.type = 'text';
        input.setAttribute('data-bind-' + i, 'age');
        body.appendChild(input);
        body.appendChild(document.createElement('br'));

        var user = new User(i);
        user.set('firstName', 'rolf_' + i);
        user.set('lastName', 'richter_' + i);
        user.set('age', (i / 2).toFixed());
    }


</script>

</body>
</html>